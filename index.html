<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ROTA ¬∑ Painel √önico</title>
  <meta name="description" content="Painel √∫nico para unificar sistemas e documentos do Batalh√£o (GTA RP Pol√≠cia)" />

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['system-ui', 'ui-sans-serif', 'Inter', 'sans-serif'],
          },
          colors: {
            rota: {
              gold: '#fbbf24',
              dark: '#020617',
            },
          },
          boxShadow: {
            'glow-amber': '0 0 30px rgba(251, 191, 36, 0.25)',
          },
        },
      },
    }
  </script>

  <style>
    html, body, #root { height: 100%; }
    body { background: #020617; }
  </style>
</head>
<body class="dark antialiased">
  <div id="root"></div>

  <!-- React + Babel -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useMemo, useState, useEffect } = React;

    // ----------------- URLs E CONFIG -----------------
    const RAW_LINKS = {
      // Sistemas
      ponto: "https://gabrielsaleh1.github.io/Ponto-Online",
      rso: "https://gabrielsaleh1.github.io/RSO-Online",

      // Hierarquia travada em leitura (par√¢metro + sandbox)
      hierarquia: "https://gabrielsaleh1.github.io/Hierarquia?view=1",

      // Documentos do Batalh√£o
      fardamentos: "docs.google.com/spreadsheets/u/1/d/15q-JK8zUxIMMAAp_ssNFRrNsddTfGIJHVP241RUw3J4/edit?usp=sharing",
      doutrinas: "https://docs.google.com/document/d/1LPXXQl9Ux7o3iEy8zCpRePdtH_zCRyUnKS1Bkj_bLjE/edit?usp=sharing",
      secoes: "https://docs.google.com/spreadsheets/d/1Rw6o7O1rAjVC4XCDFwe6L0vInKSQsBvYZsWm6Rb1pfE/edit?gid=0#gid=0",
      crimes: "https://docs.google.com/document/d/1iGnC80f9COCirKVGHYm5Nr9xSr6hodYHCDl3IAXZvoY/edit?tab=t.0",
    };

    // Converte links do Google Docs/Sheets para /preview (melhor para iframe)
    function toEmbedUrl(url) {
      if (!url) return url;
      if (!/^https?:\/\//i.test(url)) url = "https://" + url;
      try {
        const u = new URL(url);
        if (u.hostname !== "docs.google.com") return url;
        const parts = u.pathname.split("/").filter(Boolean);
        const type = parts[0]; // "document" | "spreadsheets" | ...
        const idIndex = parts.findIndex(p => p === "d");
        const fileId = idIndex >= 0 ? parts[idIndex + 1] : null;
        if (fileId) {
          const frag = u.hash || "";
          return `https://docs.google.com/${type}/d/${fileId}/preview${frag}`;
        }
      } catch(e) {}
      return url;
    }

    // Itens da interface
    const CONFIG = {
      brand: { name: "ROTA ¬∑ Painel √önico", badge: "Batalh√£o ROTA ¬∑ GTA RP" },
      version: "v1.0 ¬∑ Painel Unificado",
      sections: [
        {
          label: "Sistemas Operacionais",
          items: [
            {
              id: "ponto",
              name: "Bate-Ponto",
              url: RAW_LINKS.ponto,
              icon: "‚è±Ô∏è",
              desc: "Registro de in√≠cio e fim de servi√ßo dos militares.",
              tag: "PRINCIPAL",
              sandbox: null,
            },
            {
              id: "rso",
              name: "RSO Online",
              url: RAW_LINKS.rso,
              icon: "üìã",
              desc: "Registro de Servi√ßos Operacionais.",
              tag: "OCORR√äNCIAS",
              sandbox: null,
            },
          ],
        },
        {
          label: "Documentos do Batalh√£o",
          items: [
            {
              id: "hierarquia",
              name: "Hierarquia do Batalh√£o",
              url: RAW_LINKS.hierarquia,
              icon: "üèõÔ∏è",
              desc: "Estrutura hier√°rquica completa da unidade.",
              tag: "CONSULTA",
              sandbox: "allow-scripts allow-same-origin allow-downloads",
            },
            {
              id: "fardamentos",
              name: "Fardamentos do Batalh√£o",
              url: RAW_LINKS.fardamentos,
              icon: "üéΩ",
              desc: "Controle e padr√£o dos fardamentos.",
              tag: "LOG√çSTICA",
              sandbox: null,
            },
            {
              id: "doutrinas",
              name: "Doutrinas e Regimento Interno",
              url: RAW_LINKS.doutrinas,
              icon: "üìú",
              desc: "Normas, procedimentos e regras do batalh√£o.",
              tag: "NORMAS",
              sandbox: null,
            },
            {
              id: "secoes",
              name: "Se√ß√µes Internas do Batalh√£o",
              url: RAW_LINKS.secoes,
              icon: "üóÇÔ∏è",
              desc: "Organiza√ß√£o das se√ß√µes internas.",
              tag: "ADMINISTRATIVO",
              sandbox: null,
            },
            {
              id: "crimes",
              name: "Crimes Militares",
              url: RAW_LINKS.crimes,
              icon: "‚öñÔ∏è",
              desc: "Tabela de crimes e enquadramentos.",
              tag: "LEGISLA√á√ÉO",
              sandbox: null,
            },
          ],
        },
      ],
    };

    // ----------------- COMPONENTES -----------------
    function Sidebar({ sections, activeId, onSelect }) {
      return (
        <aside className="w-80 shrink-0 border-r border-white/10 bg-slate-950/80 backdrop-blur-xl rounded-3xl p-3 flex flex-col shadow-xl shadow-black/40">
          {/* Cabe√ßalho da marca */}
          <div className="px-3 py-3 mb-2 rounded-2xl bg-gradient-to-r from-amber-500/20 via-amber-400/10 to-transparent border border-amber-400/40 shadow-glow-amber">
            <div className="flex items-center gap-3">
